---
title: Hexo多服务器一键部署
date: 2019-07-04 17:07:11
categories: 程序员笔记
tags: 程序员笔记
---
## 自动化部署成果和测试

### 由头

这两天看了一些自动化部署的方案，就想着把自己公司的部署方式搞成自动化的。其实还是自己懒，实在不想每次都打好包再远程服务器去替换、重启。

这里得说一下前提，因为历史原因，公司服务器用的阿里云，且是Windows系统（好烦啊，为啥不买Linux的）。
项目结构也简单，后端就一个，SpringBoot框架的，打包出来是个jar，我在服务器上写个bat文件直接java -jar就完事儿。
前端有好几个东西，包含微信的H5、web端的管理平台、公司的宣传网站。
因为业务量也不大，所以用不着分布式啥的。就直接一个nginx映射几个成几个子域名，后端接口也通过nginx映射后供前端页面调用。

总结一下现在更新方式：
    1. 后端更新：直接本地打jar包->远程服务器->停服务->备份旧jar包->拷贝新jar包->起服务
    2. 前端更新：前端妹子打好包（Vue开发的，就是个dist.rar）发我->本地解压改名->远程服务器->备份旧的前端文件->替换成新的

### 实现方式

业务比较简单，也用不着啥Jenkins这些持续集成啥的东西了，就Git Hook应该满足需求。
我现在在自己的阿里云服务器（CentOS）上试Git Hook，等成功了再搞公司服务器去。
先写到这边。

测试推送到服务器裸仓库时，能否自动触发钩子拉取并更新。
（未完待续哦……）
